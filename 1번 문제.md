## 동시에 같은 DB Table row 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.

(아래는 `spring`,`Jpa`기준으로 서술하였음)


### Lock을 설정
> 트랜젝션 수행시 서로 끼어들지 못하게해서 `격리성`을 보장해야함
>
> -> 동시에 update하는 걸 방지하기 위해 DBMS에 `Lock`을 설정해줘야한다.

#### 동시 접근 빈도가 드문 곳 (e.g. 회원 정보) : `낙관적 락`
- 어플리케이션 레벨에서 충돌감지하게 됨.(트랜젝션 업데이트 전, 버전 속성의 변경 유무 확인 -> 버전이 다른 경우 예외 발생시킴)
- 충돌 시 OptmisticLockException ->  롤백을 개발자가 직접 처리해 줘야함
- 비관적 락에 비해 성능 좋음

#### 동시 접근 빈도가 잦은 곳 (e.g. 재고량) `비관적 락`: 
- 무조건 데이터 경합이 발생할 것이라고 예상되는 곳에는 비관적 락을 걸어야 함 
- LockModeType 은 `PESSIMISTIC_WRITE` 사용
    - 트랜젝션이 데이터 write할 때 Lock건다.
    - 트랜젝션 수행 중에 다른 트랜젝션이 해당 데이터를 읽기 X , 쓰기 X

- DBMS에서 제공하는 `롤백 기능` 사용 가능
- 낙관적 락에 비해 성능은 다소 떨어지지만 `데이터 무결성` 보장
